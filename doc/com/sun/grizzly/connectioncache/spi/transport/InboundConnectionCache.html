<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.5.0_16) on Tue Mar 24 08:44:48 CET 2009 -->
<META http-equiv="Content-Type" content="text/html; charset=UTF-8">
<TITLE>
InboundConnectionCache (grizzly-framework 1.9.10 API)
</TITLE>

<META NAME="keywords" CONTENT="com.sun.grizzly.connectioncache.spi.transport.InboundConnectionCache interface">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="InboundConnectionCache (grizzly-framework 1.9.10 API)";
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/InboundConnectionCache.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ContactInfo.html" title="interface in com.sun.grizzly.connectioncache.spi.transport"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/OutboundConnectionCache.html" title="interface in com.sun.grizzly.connectioncache.spi.transport"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="InboundConnectionCache.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
com.sun.grizzly.connectioncache.spi.transport</FONT>
<BR>
Interface InboundConnectionCache&lt;C extends <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/Closeable.html" title="class or interface in java.io">Closeable</A>&gt;</H2>
<DL>
<DT><B>All Superinterfaces:</B> <DD><A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html" title="interface in com.sun.grizzly.connectioncache.spi.transport">ConnectionCache</A>&lt;C&gt;</DD>
</DL>
<DL>
<DT><B>All Known Implementing Classes:</B> <DD><A HREF="../../../../../../com/sun/grizzly/connectioncache/impl/transport/InboundConnectionCacheBlockingImpl.html" title="class in com.sun.grizzly.connectioncache.impl.transport">InboundConnectionCacheBlockingImpl</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public interface <B>InboundConnectionCache&lt;C extends <A HREF="http://java.sun.com/j2se/1.5.0/docs/api/java/io/Closeable.html" title="class or interface in java.io">Closeable</A>&gt;</B><DT>extends <A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html" title="interface in com.sun.grizzly.connectioncache.spi.transport">ConnectionCache</A>&lt;C&gt;</DL>
</PRE>

<P>
A concurrent connection cache for passively created connections (e.g.
 from an acceptor).  Here a Connection is an 
 abstraction of a Socket or SocketChannel: basically some sort of resource 
 that is expensive to acquire, and can be re-used freely.  
 The cache maintains a loose
 upper bound on the number of cached connections, and reclaims connections as
 needed.
 <P>
 This cache places minimal requirements on the Connections that it contains:
 <ol>
 <li>A Connection must implement a close() method.  This is called when idle
 connections are reclaimed.
 <li>A Connection must be usable as a HashMap key.  
 </ol>
 <P>
 Some simple methods are provided for monitoring the state of the cache:
 numbers of busy and idle connections, and the total number of 
 connections in the cache.
 <P>
 Access is also provided to the cache configuration: maxParallelConnections,
 highWaterMark, and numberToReclaim.  Currently these can only be set when
 the cache is created.

 XXX We may wish to make the cache configuration dynamically configurable.
<P>

<P>
<HR>

<P>

<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html#requestProcessed(C, int)">requestProcessed</A></B>(<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html" title="type parameter in InboundConnectionCache">C</A>&nbsp;conn,
                 int&nbsp;numResponseExpected)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Indicate that request processing has been completed for a request
 received on conn.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html#requestReceived(C)">requestReceived</A></B>(<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html" title="type parameter in InboundConnectionCache">C</A>&nbsp;conn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mark a connection as busy because a request is being processed
 on the connection.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html#responseSent(C)">responseSent</A></B>(<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html" title="type parameter in InboundConnectionCache">C</A>&nbsp;conn)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Inform the cache that a response has been sent on a particular
 connection.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_com.sun.grizzly.connectioncache.spi.transport.ConnectionCache"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from interface com.sun.grizzly.connectioncache.spi.transport.<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html" title="interface in com.sun.grizzly.connectioncache.spi.transport">ConnectionCache</A></B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html#close(C)">close</A>, <A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html#getCacheType()">getCacheType</A>, <A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html#highWaterMark()">highWaterMark</A>, <A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html#numberOfBusyConnections()">numberOfBusyConnections</A>, <A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html#numberOfConnections()">numberOfConnections</A>, <A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html#numberOfIdleConnections()">numberOfIdleConnections</A>, <A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html#numberOfReclaimableConnections()">numberOfReclaimableConnections</A>, <A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ConnectionCache.html#numberToReclaim()">numberToReclaim</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="requestReceived(java.io.Closeable)"><!-- --></A><A NAME="requestReceived(C)"><!-- --></A><H3>
requestReceived</H3>
<PRE>
void <B>requestReceived</B>(<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html" title="type parameter in InboundConnectionCache">C</A>&nbsp;conn)</PRE>
<DL>
<DD>Mark a connection as busy because a request is being processed
 on the connection.  The connection may or may not be previously
 known to the cache when this method is called.
 Busy connections cannot be reclaimed.
 This provides an early indication that a Connection is in use,
 before we know how many responses still need to be sent on 
 the Connection for this request.  This reduces the likelyhood 
 of reclaiming a connection on which we are processing a request.
 <P>
 Note that this problem is inherent in a distributed system.
 We could in any case reclaim a connection AFTER a client
 has sent a request but BEFORE the request is received.
 Note that AFTER and BEFORE refer to global time which does
 not really exist in a distributed system (or at least we 
 want to pretend it is not available).

 XXX Should we age out connections?  
 This would require actual time stamps, rather than just an LRU queue.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conn</CODE> - a connection</DL>
</DD>
</DL>
<HR>

<A NAME="requestProcessed(java.io.Closeable,int)"><!-- --></A><A NAME="requestProcessed(C, int)"><!-- --></A><H3>
requestProcessed</H3>
<PRE>
void <B>requestProcessed</B>(<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html" title="type parameter in InboundConnectionCache">C</A>&nbsp;conn,
                      int&nbsp;numResponseExpected)</PRE>
<DL>
<DD>Indicate that request processing has been completed for a request
 received on conn.  This indicates that a Connection that received
 a request as indicated in a previous call to requestReceived has
 completed request processing for that request.  Responses may still 
 need to be sent.  Some number of
 responses (usually 0 or 1) may be expected ON THE SAME CONNECTION
 even for an idle connection.  We maintain a count of the number of 
 outstanding responses we expect for protocols that return the response
 on the same connection on which the request was received.  This is
 necessary to prevent reclamation of a Connection that is idle, but
 still needed to send responses to old requests.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conn</CODE> - a connection<DD><CODE>numResponseExpected</CODE> - number of connections in which a response is expected</DL>
</DD>
</DL>
<HR>

<A NAME="responseSent(java.io.Closeable)"><!-- --></A><A NAME="responseSent(C)"><!-- --></A><H3>
responseSent</H3>
<PRE>
void <B>responseSent</B>(<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html" title="type parameter in InboundConnectionCache">C</A>&nbsp;conn)</PRE>
<DL>
<DD>Inform the cache that a response has been sent on a particular
 connection.  
 <P>
 When a Connection is idle, and has no pending responses, it is
 eligible for reclamation.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>conn</CODE> - a connection</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/InboundConnectionCache.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/ContactInfo.html" title="interface in com.sun.grizzly.connectioncache.spi.transport"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../../../com/sun/grizzly/connectioncache/spi/transport/OutboundConnectionCache.html" title="interface in com.sun.grizzly.connectioncache.spi.transport"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../../../index.html?com/sun/grizzly/connectioncache/spi/transport/InboundConnectionCache.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="InboundConnectionCache.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;FIELD&nbsp;|&nbsp;CONSTR&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
Copyright &#169; 2009 <a href="http://www.sun.com">SUN Microsystems</a>. All Rights Reserved.
</BODY>
</HTML>
